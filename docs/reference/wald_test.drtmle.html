<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Wald tests for drtmle objects — wald_test.drtmle • drtmle</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Wald tests for drtmle objects — wald_test.drtmle" />
<meta property="og:description" content="Wald tests for drtmle objects" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">drtmle</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/using_drtmle.html">`drtmle`: Doubly-Robust Inference in R</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/benkeser/drtmle/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Wald tests for drtmle objects</h1>
    <small class="dont-index">Source: <a href='https://github.com/benkeser/drtmle/blob/master/R/test.R'><code>R/test.R</code></a></small>
    <div class="hidden name"><code>wald_test.drtmle.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Wald tests for drtmle objects</p>
    </div>

    <pre class="usage"><span class='co'># S3 method for drtmle</span>
<span class='fu'><a href='wald_test.html'>wald_test</a></span><span class='op'>(</span><span class='va'>object</span>, est <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"drtmle"</span><span class='op'>)</span>, null <span class='op'>=</span> <span class='fl'>0</span>, contrast <span class='op'>=</span> <span class='cn'>NULL</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>An object of class <code>"drtmle"</code></p></td>
    </tr>
    <tr>
      <th>est</th>
      <td><p>A vector indicating for which estimators to return a
confidence interval. Possible estimators include the TMLE with doubly robust
inference (<code>"drtmle"</code>, recommended), the AIPTW with additional
correction for misspecification (<code>"aiptw_c"</code>, not recommended), the
standard TMLE (<code>"tmle"</code>, recommended only for comparison to "drtmle"),
the standard AIPTW (<code>"aiptw"</code>, recommended only for comparison to
"drtmle"), and G-computation (<code>"gcomp"</code>, not recommended).</p></td>
    </tr>
    <tr>
      <th>null</th>
      <td><p>The null hypothesis value.</p></td>
    </tr>
    <tr>
      <th>contrast</th>
      <td><p>This option specifies what parameter to return confidence
intervals for. If <code>contrast=NULL</code>, then test the null hypothesis that
the covariate-adjusted marginal means equal the value(s) specified in
<code>null</code>. <code>contrast</code> can also be a numeric vector of ones, negative
ones, and zeros to define linear combinations of the various means (e.g., to
estimate an average treatment effect, see examples). In this case, we test
the null hypothesis that the linear combination of means equals the value
specified in <code>null</code>. <code>contrast</code> can also be a list with named
functions <code>f</code>, <code>h</code>, and <code>fh_grad</code>. The function <code>f</code>
takes as input argument <code>eff</code> and specifies which transformation of the
effect measure to test. The function <code>h</code> defines the contrast to be
estimated and should take as input <code>est</code>, a vector of the same length
as <code>object$a_0</code>, and output the desired contrast. The function
<code>fh_grad</code> is the gradient of the function <code>h(f())</code>. The function
computes a test of the null hypothesis that <code>h(f(object$est)) = null</code>.
See examples.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Other options (not currently used).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code>"ci.drtmle"</code> with point estimates and
 confidence intervals of the specified level.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># load super learner</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/ecpolley/SuperLearner'>SuperLearner</a></span><span class='op'>)</span>
<span class='co'># simulate data</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>123456</span><span class='op'>)</span>
<span class='va'>n</span> <span class='op'>&lt;-</span> <span class='fl'>100</span>
<span class='va'>W</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>W1 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='va'>n</span><span class='op'>)</span>, W2 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='va'>n</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>A</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Binomial.html'>rbinom</a></span><span class='op'>(</span><span class='va'>n</span>, <span class='fl'>1</span>, <span class='fu'><a href='https://rdrr.io/r/stats/Logistic.html'>plogis</a></span><span class='op'>(</span><span class='va'>W</span><span class='op'>$</span><span class='va'>W1</span> <span class='op'>-</span> <span class='va'>W</span><span class='op'>$</span><span class='va'>W2</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>Y</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Binomial.html'>rbinom</a></span><span class='op'>(</span><span class='va'>n</span>, <span class='fl'>1</span>, <span class='fu'><a href='https://rdrr.io/r/stats/Logistic.html'>plogis</a></span><span class='op'>(</span><span class='va'>W</span><span class='op'>$</span><span class='va'>W1</span> <span class='op'>*</span> <span class='va'>W</span><span class='op'>$</span><span class='va'>W2</span> <span class='op'>*</span> <span class='va'>A</span><span class='op'>)</span><span class='op'>)</span>
<span class='co'># fit drtmle with maxIter = 1 so runs fast</span>
<span class='va'>fit1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='drtmle.html'>drtmle</a></span><span class='op'>(</span>
  W <span class='op'>=</span> <span class='va'>W</span>, A <span class='op'>=</span> <span class='va'>A</span>, Y <span class='op'>=</span> <span class='va'>Y</span>, a_0 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>0</span><span class='op'>)</span>,
  family <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/family.html'>binomial</a></span><span class='op'>(</span><span class='op'>)</span>,
  stratify <span class='op'>=</span> <span class='cn'>FALSE</span>,
  SL_Q <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"SL.glm"</span>, <span class='st'>"SL.mean"</span>, <span class='st'>"SL.glm.interaction"</span><span class='op'>)</span>,
  SL_g <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"SL.glm"</span>, <span class='st'>"SL.mean"</span>, <span class='st'>"SL.glm.interaction"</span><span class='op'>)</span>,
  SL_Qr <span class='op'>=</span> <span class='st'>"SL.glm"</span>,
  SL_gr <span class='op'>=</span> <span class='st'>"SL.glm"</span>, maxIter <span class='op'>=</span> <span class='fl'>1</span>
<span class='op'>)</span>
<span class='co'># get hypothesis test that each mean = 0.5</span>
<span class='va'>test_mean</span> <span class='op'>&lt;-</span> <span class='fu'><a href='wald_test.html'>wald_test</a></span><span class='op'>(</span><span class='va'>fit1</span>, null <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span>

<span class='co'># get test that ATE = 0</span>
<span class='va'>test_ATE</span> <span class='op'>&lt;-</span> <span class='fu'><a href='wald_test.html'>wald_test</a></span><span class='op'>(</span><span class='va'>fit1</span>, null <span class='op'>=</span> <span class='fl'>0</span>, contrast <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='op'>-</span><span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># get test that risk ratio = 1, computing test on log scale</span>
<span class='va'>myContrast</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
  f <span class='op'>=</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>eff</span><span class='op'>)</span> <span class='op'>{</span>
    <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>eff</span><span class='op'>)</span>
  <span class='op'>}</span>,
  f_inv <span class='op'>=</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>eff</span><span class='op'>)</span> <span class='op'>{</span>
    <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>exp</a></span><span class='op'>(</span><span class='va'>eff</span><span class='op'>)</span>
  <span class='op'>}</span>,
  h <span class='op'>=</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>est</span><span class='op'>)</span> <span class='op'>{</span>
    <span class='va'>est</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>/</span> <span class='va'>est</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span>
  <span class='op'>}</span>,
  fh_grad <span class='op'>=</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>est</span><span class='op'>)</span> <span class='op'>{</span>
    <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span> <span class='op'>/</span> <span class='va'>est</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span>, <span class='op'>-</span><span class='fl'>1</span> <span class='op'>/</span> <span class='va'>est</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span>
  <span class='op'>}</span>
<span class='op'>)</span>
<span class='va'>test_RR</span> <span class='op'>&lt;-</span> <span class='fu'><a href='wald_test.html'>wald_test</a></span><span class='op'>(</span><span class='va'>fit1</span>, contrast <span class='op'>=</span> <span class='va'>myContrast</span>, null <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>
<span class='co'>#</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by David Benkeser.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


